@(title: String)(content: Html)

<!DOCTYPE html>

<html lang="en">
    <head>
        <title>What programming language should You use?</title>
        <link rel="stylesheet" media="screen" href="@routes.Assets.versioned("stylesheets/slider.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.versioned("stylesheets/main.css")">
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.versioned("images/favicon.png")">
        <script src="@routes.Assets.versioned("javascripts/jquery-2.1.4.min.js")" type="text/javascript"></script>
    </head>
    <body>
        <h2>What programming language should You use?</h2>
        <div id="wrapper">
            <div id="selection-pane">
                <form id="form">
                    <fieldset>
                        <legend>type system</legend>
                        <label>
                            <input type="radio" name="type-system" value="statically-typed"/> Statically typed
                        </label>
                        <br>
                        <label>
                            <input type="radio" name="type-system" value="dynamically-typed"/> Dynamically typed
                        </label>
                        <br>
                        <label>
                            <input type="radio" name="type-system" value="not-specified" checked="checked"/> n/a
                        </label>
                    </fieldset>

                    <fieldset>
                        <legend>type inheritance</legend>
                        <label>
                            <input type="radio" name="typeInheritance" value="yes"/> yes
                        </label>
                        <label>
                            <input type="radio" name="typeInheritance" value="neutral" checked="checked"/> n/a
                        </label>
                        <label>
                            <input type="radio" name="typeInheritance" value="no"/> no
                        </label>
                    </fieldset>

                    <fieldset>
                        <legend>encapsulation</legend>
                        <label>
                            <input type="radio" name="encapsulation" value="yes"/> yes
                        </label>
                        <label>
                            <input type="radio" name="encapsulation" value="neutral" checked="checked"/> n/a
                        </label>
                        <label>
                            <input type="radio" name="encapsulation" value="no"/> no
                        </label>
                    </fieldset>

                    <fieldset>
                        <legend>mutation</legend>
                        <label>
                            <input type="radio" name="mutation" value="yes"/> yes
                        </label>
                        <label>
                            <input type="radio" name="mutation" value="neutral" checked="checked"/> n/a
                        </label>
                        <label>
                            <input type="radio" name="mutation" value="no"/> no
                        </label>
                    </fieldset>

                    <fieldset>
                        <legend>side effects</legend>
                        <label>
                            <input type="radio" name="sideEffects" value="yes"/> yes
                        </label>
                        <label>
                            <input type="radio" name="sideEffects" value="neutral" checked="checked"/> n/a
                        </label>
                        <label>
                            <input type="radio" name="sideEffects" value="no"/> no
                        </label>
                    </fieldset>

                    <fieldset>
                        <legend>pattern matching</legend>
                        <label>
                            <input type="radio" name="patternMatching" value="yes"/> yes
                        </label>
                        <label>
                            <input type="radio" name="patternMatching" value="neutral" checked="checked"/> n/a
                        </label>
                        <label>
                            <input type="radio" name="patternMatching" value="no"/> no
                        </label>
                    </fieldset>

                    <fieldset>
                        <legend>lambdas</legend>
                        <label>
                            <input type="radio" name="lambdas" value="yes"/> yes
                        </label>
                        <label>
                            <input type="radio" name="lambdas" value="neutral" checked="checked"/> n/a
                        </label>
                        <label>
                            <input type="radio" name="lambdas" value="no"/> no
                        </label>
                    </fieldset>

                    <fieldset>
                        <legend>type inference</legend>
                        <label>
                            <input type="radio" name="typeInference" value="yes"/> yes
                        </label>
                        <label>
                            <input type="radio" name="typeInference" value="neutral" checked="checked"/> n/a
                        </label>
                        <label>
                            <input type="radio" name="typeInference" value="no"/> no
                        </label>
                    </fieldset>

                    <fieldset>
                        <legend>duck typing</legend>
                        <label>
                            <input type="radio" name="duckTyping" value="yes"/> yes
                        </label>
                        <label>
                            <input type="radio" name="duckTyping" value="neutral" checked="checked"/> n/a
                        </label>
                        <label>
                            <input type="radio" name="duckTyping" value="no"/> no
                        </label>
                    </fieldset>

                    <fieldset>
                        <legend>simple syntax</legend>
                        <label>
                            <input type="radio" name="simpleSyntax" value="yes"/> yes
                        </label>
                        <label>
                            <input type="radio" name="simpleSyntax" value="neutral" checked="checked"/> n/a
                        </label>
                        <label>
                            <input type="radio" name="simpleSyntax" value="no"/> no
                        </label>
                    </fieldset>

                    <fieldset>
                        <legend>clear documentation</legend>
                        <label>
                            <input type="radio" name="clearDocumentation" value="yes"/> yes
                        </label>
                        <label>
                            <input type="radio" name="clearDocumentation" value="neutral" checked="checked"/> n/a
                        </label>
                        <label>
                            <input type="radio" name="clearDocumentation" value="no"/> no
                        </label>
                    </fieldset>

                    <fieldset>
                        <legend>actors</legend>
                        <label>
                            <input type="radio" name="actors" value="yes"/> yes
                        </label>
                        <label>
                            <input type="radio" name="actors" value="neutral" checked="checked"/> n/a
                        </label>
                        <label>
                            <input type="radio" name="actors" value="no"/> no
                        </label>
                    </fieldset>

                    <fieldset>
                        <legend>lazy evaluation</legend>
                        <label>
                            <input type="radio" name="lazyEvaluation" value="yes"/> yes
                        </label>
                        <label>
                            <input type="radio" name="lazyEvaluation" value="neutral" checked="checked"/> n/a
                        </label>
                        <label>
                            <input type="radio" name="lazyEvaluation" value="no"/> no
                        </label>
                    </fieldset>

                    <fieldset>
                        <legend>macros</legend>
                        <label>
                            <input type="radio" name="macros" value="yes"/> yes
                        </label>
                        <label>
                            <input type="radio" name="macros" value="neutral" checked="checked"/> n/a
                        </label>
                        <label>
                            <input type="radio" name="macros" value="no"/> no
                        </label>
                    </fieldset>

                    <fieldset>
                        <legend>Considered IDE</legend>
                        <label>
                            <input type="checkbox" name="intellij" value="intellij" checked="checked"/> intellij
                        </label>
                        <label>
                            <input type="checkbox" name="eclipse" value="eclipse" checked="checked"/> eclipse
                        </label>
                        <label>
                            <input type="checkbox" name="visualStudio" value="visualStudio" checked="checked"/>
                            visual studio
                        </label>
                    </fieldset>

                    <fieldset>
                        <legend>Resulting code</legend>
                        <label>
                            <input type="radio" name="code" value="machineCode" /> Machine code
                        </label>
                        <br>
                        <label>
                            <input type="radio" name="code" value="virtualMachine" /> Byte code run on virtual machine
                        </label>
                        <br>
                        <label>
                            <input type="radio" name="code" value="interpreter" /> Interpreted
                        </label>
                        <br>
                        <label>
                            <input type="radio" name="code" value="not-specified" checked="checked" /> n/a
                        </label>
                    </fieldset>
                </form>
            </div>

            <div id="suggestion-pane">
                <h3>Suggestions:</h3>
                <ul id="suggestion-list">
                </ul>
            </div>
        </div>

        <script>
                var updateState = function(){
                    function getRuleFromRadio(a){
                        return rule($('input[name=' + a + ']:checked', "#form").val(), a);
                    }

                    function getRule(prefix,alternative, first, second){
                        x = $('input[name=' + second + ']:checked', "#form").val();

                        if(x){
                            return prefix + "(" + first + ", " + second + ").";
                        }

                        return alternative + "("+ first + ", " + second + ").";
                    }

                    function code(str) {
                        x = $("input[name=code]:checked", "#form").val();
                        if(x === str)
                            return "yes(has, "+ str +").";
                        if(x === "not-specified")
                            return "neutral(has, "+ str +").";
                        else return "no(has, " + str + ").";
                    }
                    var state = [
                        typed($("input[name=type-system]:checked", "#form").val()),
                        getRuleFromRadio("typeInheritance"),
                        getRuleFromRadio("encapsulation"),
                        getRuleFromRadio("mutation"),
                        getRuleFromRadio("sideEffects"),
                        getRuleFromRadio("patternMatching"),
                        getRuleFromRadio("lambdas"),
                        getRuleFromRadio("typeInference"),
                        getRuleFromRadio("duckTyping"),
                        getRuleFromRadio("simpleSyntax"),
                        getRuleFromRadio("clearDocumentation"),
                        getRuleFromRadio("actors"),
                        getRuleFromRadio("lazyEvaluation"),
                        getRuleFromRadio("macros"),
                        getRule("yes", "no", "mozna_uzywac_z", "intellij"),
                        getRule("yes", "no", "mozna_uzywac_z", "eclipse"),
                        getRule("yes", "no", "mozna_uzywac_z", "visualStudio"),
                        getRule("yes", "no", "mozna_uzywac_z", "visualStudio"),
                        code("machineCode"),
                        code("virtualMachine"),
                        code("interpreter"),
                    ];

                    $.ajax({
                        url: '/',
                        type: 'POST',
                        data: JSON.stringify(state),
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',
                        async: false,
                        success : updateSuggestions,
                        error : function(XMLHttpRequest, textStatus, errorThrown) {
                            alert('There was an error.' + textStatus + ' ' + errorThrown);
                        }
                    });
                };

                var updateSuggestions = function(suggestions){
                    var list = $('#suggestion-list');
                    list.empty();

                    $.each(suggestions, function(i)
                    {
                        var li = $('<li/>')
                                .addClass('ui-menu-item')
                                .attr('role', 'menuitem')
                                .appendTo(list);
                        $('<a/>')
                                .addClass('ui-all')
                                .text(suggestions[i])
                                .appendTo(li);
                    });
                };

                var rule = function(prefix, str){
                    return prefix + "(has," + str + ").";
                };

                var typed = function(str){
                    if(str === "statically-typed"){
                        return "yes(has, types_resolved_during_compilation).";
                    }else if (str === "dynamically-typed"){
                        return "no(has, types_resolved_during_compilation).";
                    }else{
                        return "neutral(has, types_resolved_during_compilation).";
                    }
                };


                $("#form").find("input").on("change", updateState);
                updateState();
        </script>
    </body>
</html>
